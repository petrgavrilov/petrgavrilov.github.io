import{a as L,b as $,d as j,e as A}from"./chunk-T46MZFX6.js";import{$a as B,Ba as h,Fa as d,Ga as M,Ha as x,Ma as E,Pa as R,Qa as I,T as a,Ta as y,U as f,W as S,_ as w,a as C,aa as c,b as _,bb as T,cb as z,eb as q,fa as i,ga as r,h as b,ha as u,ma as g,na as k,r as O,va as p,wa as P,xa as F,y as m,za as D}from"./chunk-76LF5C3P.js";function K(s,n){if(s&1&&(i(0,"a",7)(1,"span",2),p(2),r(),i(3,"span",2)(4,"span",8),u(5,"app-country-flag",9),r(),i(6,"span",10),p(7),r()(),i(8,"span",2)(9,"span",8),u(10,"app-country-flag",9),r(),i(11,"span",10),p(12),r()(),i(13,"span",2),p(14),d(15,"date"),d(16,"date"),d(17,"date"),r()()),s&2){let t=n.$implicit,o=k();c("routerLink","/routes/"+t.id)("queryParams",o.filters),a(2),F("#",t.id,""),a(3),c("country",t==null||t.fromPort==null?null:t.fromPort.country),a(2),P(t==null||t.fromPort==null?null:t.fromPort.code),a(3),c("country",t==null||t.toPort==null?null:t.toPort.country),a(2),P(t==null||t.toPort==null?null:t.toPort.code),a(2),D(" ",x(15,10,t.finishDate,"yyyy"),", ",x(16,13,t.startDate,"MMM dd"),"\u2013",x(17,16,t.finishDate,"MMM dd")," ")}}var H=(()=>{let n=class n{constructor(){this.routes=[],this.filters={},this.setFilters=new S}onSearch(o){let e=o.target;this.setFilters.emit(_(C({},this.filters),{searchTerm:e.value}))}trackRouteById(o,e){return e.id}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=m({type:n,selectors:[["app-routes-list"]],inputs:{routes:"routes",filters:"filters"},outputs:{setFilters:"setFilters"},standalone:!0,features:[h],decls:14,vars:3,consts:[[1,"root"],[1,"list-header"],[1,"list-info"],[1,"list-items"],["class","list-item",3,"routerLink","queryParams",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-footer"],["type","text","placeholder","start typing to filter routes",1,"search-input",3,"value","input"],[1,"list-item",3,"routerLink","queryParams"],[1,"list-info-icon"],[3,"country"],[1,"list-info-code"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"span",2),p(3,"ID"),r(),i(4,"span",2),p(5,"Origin"),r(),i(6,"span",2),p(7,"Destination"),r(),i(8,"span",2),p(9,"Dates"),r()(),i(10,"div",3),w(11,K,18,19,"a",4),r(),i(12,"div",5)(13,"input",6),g("input",function(v){return l.onSearch(v)}),r()()()),e&2&&(a(11),c("ngForOf",l.routes)("ngForTrackBy",l.trackRouteById),a(2),c("value",(l.filters==null?null:l.filters.searchTerm)||""))},dependencies:[y,E,I,q,z,j],styles:[`.root[_ngcontent-%COMP%]{position:relative;height:100%;overflow:auto;overscroll-behavior-y:none}.list-header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:sticky;top:0;height:38px;border-radius:8px 8px 0 0;border-bottom:1px solid #eee}.list-item[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;cursor:pointer}.list-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #efefef}.list-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.list-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:calc(100% - 78px)}.list-info[_ngcontent-%COMP%]{box-sizing:border-box;padding:12px 8px;font-size:12px;line-height:1.25;color:#333;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}.list-header[_ngcontent-%COMP%]   .list-info[_ngcontent-%COMP%]{font-weight:700;color:#111;text-transform:uppercase;font-size:10px}.list-info[_ngcontent-%COMP%]:nth-child(1){width:48px;padding-left:16px}.list-info[_ngcontent-%COMP%]:nth-child(2), .list-info[_ngcontent-%COMP%]:nth-child(3){width:calc((100% - 218px)/2);min-width:90px}.list-info[_ngcontent-%COMP%]:nth-child(4){width:170px;padding-right:16px;text-align:right}.list-info-code[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;color:#222;font-weight:500;margin-right:4px}.list-info-icon[_ngcontent-%COMP%]{display:block;margin-right:6px}.list-info-icon[_ngcontent-%COMP%]   app-country-flag[_ngcontent-%COMP%]{display:block;font-size:0}.list-footer[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:sticky;bottom:0;height:38px;border-radius:0 0 8px 8px;border-top:1px solid #eee}.search-input[_ngcontent-%COMP%]{box-sizing:border-box;outline:none;display:block;width:100%;height:38px;border:0;padding:4px 16px 4px 36px;color:#111;background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"><g clip-path="url(%23a)"><path fill="rgba(0, 0, 0, 0.24)" fill-rule="evenodd" d="M9.913 12.033a6.5 6.5 0 1 1 2.12-2.12l.028.026 3 3a1.5 1.5 0 0 1-2.122 2.122l-3-3a1.817 1.817 0 0 1-.026-.028ZM11 6.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z" clip-rule="evenodd"/></g><defs><clipPath id="a"><path fill="%23fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>');background-repeat:no-repeat;background-position:16px 13px;background-size:12px;font-size:13px}.search-input[_ngcontent-%COMP%]::placeholder{color:#0000007a}`],changeDetection:0});let s=n;return s})();var ut=(()=>{let n=class n{constructor(o,e,l){this.dataService=o,this.router=e,this.activatedRoute=l,this.filters=new b({}),this.filters$=this.filters.asObservable()}ngOnInit(){this.routes$=this.filters.pipe(O(e=>this.dataService.getRoutes$(e)));let o=this.activatedRoute.snapshot.queryParams;this.filters.next(o)}onSetFilters(o){this.filters.next(o),this.router.navigate([],{queryParams:o,queryParamsHandling:"merge"})}};n.\u0275fac=function(e){return new(e||n)(f(A),f(T),f(B))},n.\u0275cmp=m({type:n,selectors:[["app-routes-page"]],standalone:!0,features:[h],decls:5,vars:6,consts:[[3,"routes","filters","setFilters"]],template:function(e,l){e&1&&(i(0,"app-routes-root"),u(1,"app-map"),i(2,"app-routes-list",0),g("setFilters",function(v){return l.onSetFilters(v)}),d(3,"async"),d(4,"async"),r()()),e&2&&(a(2),c("routes",M(3,2,l.routes$))("filters",M(4,4,l.filters$)))},dependencies:[y,R,$,L,H],encapsulation:2,changeDetection:0});let s=n;return s})();export{ut as RoutesPageComponent};
