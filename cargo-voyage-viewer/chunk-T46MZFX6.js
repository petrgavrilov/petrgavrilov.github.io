import{A as N,B as ie,Ba as f,C as M,J as ne,La as he,Ma as ge,N as se,Na as ce,Q as ae,T as V,Ta as R,U as g,Ua as de,W as b,Wa as pe,X as _,_ as S,_a as ue,a as v,aa as p,b as w,c as Q,f as K,fa as I,g as J,ga as F,h as u,ha as z,j as y,k as x,l as j,ma as re,n as q,na as oe,oa as T,p as E,pa as k,q as X,r as Y,ra as le,s as A,sa as G,ta as W,u as B,v as ee,w as H,x as P,y as m,z as te}from"./chunk-76LF5C3P.js";var je=["*"],L=class{_clearListeners(){for(let i of this._listeners)i.remove();this._listeners=[]}constructor(i){this._ngZone=i,this._pending=[],this._listeners=[],this._targetStream=new u(void 0)}getLazyEmitter(i){return this._targetStream.pipe(Y(l=>{let e=new K(t=>{if(!l){this._pending.push({observable:e,observer:t});return}let n=l.addListener(i,a=>{this._ngZone.run(()=>t.next(a))});if(!n){t.complete();return}return this._listeners.push(n),()=>n.remove()});return e}))}setTarget(i){let l=this._targetStream.value;i!==l&&(l&&(this._clearListeners(),this._pending=[]),this._targetStream.next(i),this._pending.forEach(e=>e.observable.subscribe(e.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}};function $(s,i){return window.google.maps.importLibrary(s).then(l=>l[i])}var D={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},me="500px",_e="500px",C=(()=>{let i=class i{set center(e){this._center=e}set zoom(e){this._zoom=e}set options(e){this._options=e||D}constructor(e,t,n){if(this._elementRef=e,this._ngZone=t,this._eventManager=new L(P(_)),this.height=me,this.width=_e,this._options=D,this.mapInitialized=new b,this.authFailure=new b,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=de(n),this._isBrowser){let a=window;a.google,this._existingAuthFailureCallback=a.gm_authFailure,a.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();let t=this.googleMap;t&&(e.options&&t.setOptions(this._combineOptions()),e.center&&this._center&&t.setCenter(this._center),e.zoom&&this._zoom!=null&&t.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&t.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{$("maps","Map").then(e=>this._initialize(e))}))}_initialize(e){this._ngZone.runOutsideAngular(()=>{this.googleMap=new e(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let e=window;e.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(e,t){this._assertInitialized(),this.googleMap.fitBounds(e,t)}panBy(e,t){this._assertInitialized(),this.googleMap.panBy(e,t)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,t){this._assertInitialized(),this.googleMap.panToBounds(e,t)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(E(1)).toPromise()}_setSize(){if(this._mapEl){let e=this._mapEl.style;e.height=this.height===null?"":fe(this.height)||me,e.width=this.width===null?"":fe(this.width)||_e}}_combineOptions(){let e=this._options||{};return w(v({},e),{center:this._center||e.center||D.center,zoom:this._zoom??e.zoom??D.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||D.mapTypeId})}_assertInitialized(){this.googleMap}};i.\u0275fac=function(t){return new(t||i)(g(ae),g(_),g(ne))},i.\u0275cmp=m({type:i,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],standalone:!0,features:[M,f],ngContentSelectors:je,decls:2,vars:0,consts:[[1,"map-container"]],template:function(t,n){t&1&&(T(),z(0,"div",0),k(1))},encapsulation:2,changeDetection:0});let s=i;return s})(),Ae=/([A-Za-z%]+)$/;function fe(s){return s==null?"":Ae.test(s)?s:`${s}px`}var Be={position:{lat:37.421995,lng:-122.084092}},ye=(()=>{let i=class i{set title(e){this._title=e}set position(e){this._position=e}set label(e){this._label=e}set clickable(e){this._clickable=e}set options(e){this._options=e}set icon(e){this._icon=e}set visible(e){this._visible=e}constructor(e,t){this._googleMap=e,this._ngZone=t,this._eventManager=new L(P(_)),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed"),this.markerInitialized=new b}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),$("marker","Marker")]).then(([e,t])=>{this._initialize(e,t)})}))}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.marker=new t(this._combineOptions()),this._assertInitialized(),this.marker.setMap(e),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(e){let{marker:t,_title:n,_position:a,_label:o,_clickable:r,_icon:h,_visible:c}=this;t&&(e.options&&t.setOptions(this._combineOptions()),e.title&&n!==void 0&&t.setTitle(n),e.position&&a&&t.setPosition(a),e.label&&o!==void 0&&t.setLabel(o),e.clickable&&r!==void 0&&t.setClickable(r),e.icon&&h&&t.setIcon(h),e.visible&&c!==void 0&&t.setVisible(c))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(E(1)).toPromise()}_combineOptions(){let e=this._options||Be;return w(v({},e),{title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible})}_assertInitialized(){}};i.\u0275fac=function(t){return new(t||i)(g(C),g(_))},i.\u0275dir=N({type:i,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],standalone:!0,features:[M]});let s=i;return s})();var Me=(()=>{let i=class i{set options(e){this._options.next(e||{})}set path(e){this._path.next(e)}constructor(e,t){this._map=e,this._ngZone=t,this._eventManager=new L(P(_)),this._options=new u({}),this._path=new u(void 0),this._destroyed=new J,this.polylineClick=this._eventManager.getLazyEmitter("click"),this.polylineDblclick=this._eventManager.getLazyEmitter("dblclick"),this.polylineDrag=this._eventManager.getLazyEmitter("drag"),this.polylineDragend=this._eventManager.getLazyEmitter("dragend"),this.polylineDragstart=this._eventManager.getLazyEmitter("dragstart"),this.polylineMousedown=this._eventManager.getLazyEmitter("mousedown"),this.polylineMousemove=this._eventManager.getLazyEmitter("mousemove"),this.polylineMouseout=this._eventManager.getLazyEmitter("mouseout"),this.polylineMouseover=this._eventManager.getLazyEmitter("mouseover"),this.polylineMouseup=this._eventManager.getLazyEmitter("mouseup"),this.polylineRightclick=this._eventManager.getLazyEmitter("rightclick"),this.polylineInitialized=new b}ngOnInit(){this._map._isBrowser&&this._combineOptions().pipe(E(1)).subscribe(e=>{google.maps.Polyline&&this._map.googleMap?this._initialize(this._map.googleMap,google.maps.Polyline,e):this._ngZone.runOutsideAngular(()=>{Promise.all([this._map._resolveMap(),$("maps","Polyline")]).then(([t,n])=>{this._initialize(t,n,e)})})})}_initialize(e,t,n){this._ngZone.runOutsideAngular(()=>{this.polyline=new t(n),this._assertInitialized(),this.polyline.setMap(e),this._eventManager.setTarget(this.polyline),this.polylineInitialized.emit(this.polyline),this._watchForOptionsChanges(),this._watchForPathChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroyed.next(),this._destroyed.complete(),this.polyline?.setMap(null)}getDraggable(){return this._assertInitialized(),this.polyline.getDraggable()}getEditable(){return this._assertInitialized(),this.polyline.getEditable()}getPath(){return this._assertInitialized(),this.polyline.getPath()}getVisible(){return this._assertInitialized(),this.polyline.getVisible()}_combineOptions(){return x([this._options,this._path]).pipe(y(([e,t])=>w(v({},e),{path:t||e.path})))}_watchForOptionsChanges(){this._options.pipe(A(this._destroyed)).subscribe(e=>{this._assertInitialized(),this.polyline.setOptions(e)})}_watchForPathChanges(){this._path.pipe(A(this._destroyed)).subscribe(e=>{e&&(this._assertInitialized(),this.polyline.setPath(e))})}_assertInitialized(){}};i.\u0275fac=function(t){return new(t||i)(g(C),g(_))},i.\u0275dir=N({type:i,selectors:[["map-polyline"]],inputs:{options:"options",path:"path"},outputs:{polylineClick:"polylineClick",polylineDblclick:"polylineDblclick",polylineDrag:"polylineDrag",polylineDragend:"polylineDragend",polylineDragstart:"polylineDragstart",polylineMousedown:"polylineMousedown",polylineMousemove:"polylineMousemove",polylineMouseout:"polylineMouseout",polylineMouseover:"polylineMouseover",polylineMouseup:"polylineMouseup",polylineRightclick:"polylineRightclick",polylineInitialized:"polylineInitialized"},exportAs:["mapPolyline"],standalone:!0});let s=i;return s})();var ze=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=te({type:i}),i.\u0275inj=ee({});let s=i;return s})();var ve=[{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{visibility:"on"},{color:"#C6E2FF"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#C5E3BF"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#D1D1B8"}]}];var U=new Map([[1024,{left:48,right:448,top:48,bottom:48}],[0,{left:32,right:32,top:32,bottom:390}]]);var Ce=s=>{let i=s.map(t=>t.speed).map(t=>t===null?0:t),l=Math.min(...i),e=Math.max(...i);return[l,e]},be=s=>{let l=s.map(r=>r.speed).filter(r=>r!==null).sort((r,h)=>r-h),e=we(l,.25),t=we(l,.75),n=t-e,a=e-1.5*n,o=t+1.5*n;return s.map(r=>r.speed===null?r:w(v({},r),{speed:Math.max(a,Math.min(o,r.speed))}))},we=(s,i)=>{let l=(s.length-1)*i,e=Math.floor(l),t=Math.ceil(l);if(e===t)return s[e];let n=s[e],a=s[t],o=l-e;return n+o*(a-n)},Ie=(s,i,l)=>{let t=(Math.max(i,Math.min(s,l))-i)/(l-i),n=255*(1-t),a=255*t;return`rgba(${n}, ${a}, 0)`};function Ve(s,i){if(s&1&&z(0,"map-polyline",3),s&2){let l=i.$implicit;p("options",l)}}function Ge(s,i){if(s&1&&z(0,"map-marker",3),s&2){let l=i.$implicit;p("options",l)}}var vt=(()=>{let i=class i{constructor(e){this.document=e,this.options={center:{lat:0,lng:100},zoom:2,disableDefaultUI:!0,styles:ve},this.polylines=[],this.markers=[],this.initialized=new u(!1),this.projection=new u(null),this.routePoints=new u([])}ngOnInit(){this.subscription=x([this.initialized,this.projection,this.routePoints]).pipe(q(([e,t,n])=>e&&!!t&&n.length>2)).subscribe(([,,e])=>{this.renderLine(e)})}ngOnChanges(e){e.points&&this.points?.length&&this.routePoints.next(this.points)}ngOnDestroy(){this.subscription?.unsubscribe()}onMapInitialized(){this.initialized.next(!0)}onMapProjectionChanged(){this.projection.next(this.map?.getProjection()||null)}renderLine(e){this.polylines=this.getPolylines(e),this.markers=this.getMarkers(e);let t=new google.maps.LatLngBounds;e.forEach(n=>{t.extend(new google.maps.LatLng(n.latitude,n.longitude))}),this.map?.fitBounds(t,this.getMapPaddings())}getMapPaddings(){let e=this.document.body.clientWidth;for(let[t,n]of U)if(e>=t)return n;return U.get(0)}getMarkers(e){let t=e[0],n=e[e.length-1];return[this.getMarker(t,"1"),this.getMarker(n,"2")]}getMarker(e,t){return{position:{lat:e.latitude,lng:e.longitude},label:{text:t,color:"#fff"}}}getPolylines(e){e=be(e);let t=Ce(e);return e.reduce((n,a,o)=>{if(o===0)return[];let r=e[o-1],h=e[o],c=((h.speed||0)+(r.speed||0))/2,d={geodesic:!0,path:[{lat:r.latitude,lng:r.longitude},{lat:h.latitude,lng:h.longitude}],strokeColor:Ie(c,...t),strokeOpacity:1,strokeWeight:4};return[...n,d]},[])}};i.\u0275fac=function(t){return new(t||i)(g(he))},i.\u0275cmp=m({type:i,selectors:[["app-map"]],viewQuery:function(t,n){if(t&1&&le(C,5),t&2){let a;G(a=W())&&(n.map=a.first)}},inputs:{points:"points"},standalone:!0,features:[M,f],decls:4,vars:3,consts:[["width","100%","height","100%",3,"options","mapInitialized","projectionChanged"],["map",""],[3,"options",4,"ngFor","ngForOf"],[3,"options"]],template:function(t,n){t&1&&(I(0,"google-map",0,1),re("mapInitialized",function(){return n.onMapInitialized()})("projectionChanged",function(){return n.onMapProjectionChanged()}),S(2,Ve,1,1,"map-polyline",2)(3,Ge,1,1,"map-marker",2),F()),t&2&&(p("options",n.options),V(2),p("ngForOf",n.polylines),V(),p("ngForOf",n.markers))},dependencies:[ze,C,ye,Me,R,ge],styles:["[_nghost-%COMP%]   google-map[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}"],changeDetection:0});let s=i;return s})();var We=[[["app-map"]],"*"],$e=["app-map","*"],Ct=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=m({type:i,selectors:[["app-routes-root"]],standalone:!0,features:[f],ngContentSelectors:$e,decls:4,vars:0,consts:[[1,"root"],[1,"content"]],template:function(t,n){t&1&&(T(We),I(0,"div",0),k(1),I(2,"div",1),k(3,1),F()())},styles:[".root[_ngcontent-%COMP%]{background-color:#fff;width:100vw;height:100vh;position:relative}@supports (height: 100dvh){.root[_ngcontent-%COMP%]{height:100dvh}}.root[_ngcontent-%COMP%]  app-map{position:absolute;inset:0;width:100%;height:100%}.content[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;overflow:hidden;background-color:#fff;border-radius:8px;left:50%;bottom:12px;right:12px;transform:translate(-50%);max-width:400px;width:calc(100% - 24px);box-shadow:0 0 64px #00000052}@media screen and (min-width: 1024px){.content[_ngcontent-%COMP%]{top:24px;right:24px;bottom:24px;left:initial;transform:none}}.content[_ngcontent-%COMP%] >*{display:block;height:360px}@media screen and (min-width: 1024px){.content[_ngcontent-%COMP%] >*{height:100%}}"],changeDetection:0});let s=i;return s})();var Dt=(()=>{let i=class i{constructor(e){this.httpClient=e,this.dateFormatter=new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"long"}),this.dataCache=new Map,this.routeItemsCache=new Map,this.searchStringCache=new Map,this.filterFuncs=[(t,n)=>this.filterBySearchTerm(t,n)]}loadJsonData$(e){return this.dataCache.has(e)||this.dataCache.set(e,this.httpClient.get(`/assets/data/${e}.json`).pipe(X(1))),this.dataCache.get(e)}loadPortsData$(){return this.loadJsonData$("ports")}loadRoutesData$(){return this.loadJsonData$("routes")}getRouteById$(e){return j([this.loadRoutesData$(),this.loadPortsData$()]).pipe(y(([t,n])=>{let a=t.find(({route_id:o})=>o===e);return a?this.prepareRouteItem(a,n):null}))}getPrevNextRoutes$(e,t){return this.getRoutes$(t).pipe(y(n=>{let a=n.findIndex(h=>h.id===e),o=a>0?n[a-1]:n[n.length-1],r=a<n.length-1?n[a+1]:n[0];return[o,r]}))}getPortInfo$(e){return this.loadPortsData$().pipe(y(t=>t.find(a=>a.code===e)||null))}getRoutes$(e){return j([this.loadRoutesData$(),this.loadPortsData$()]).pipe(y(([t,n])=>t.map(r=>this.prepareRouteItem(r,n)).filter(r=>this.filterFuncs.every(h=>h(r,e)))))}filterBySearchTerm(e,t){return t.searchTerm?.trim()?this.prepareSearchString(e).includes(t.searchTerm?.toLowerCase().trim()):!0}prepareSearchString(e){if(this.searchStringCache.has(e.id))return this.searchStringCache.get(e.id);let Z=e,{points:t,startDate:n,finishDate:a,toPort:o,fromPort:r}=Z,h=Q(Z,["points","startDate","finishDate","toPort","fromPort"]),d=[this.dateFormatter.format(n),this.dateFormatter.format(a),...Object.values(r||{}),...Object.values(o||{}),...Object.values(h)].join(" ").toLowerCase();return this.searchStringCache.set(e.id,d),d}prepareRouteItem(e,t){if(this.routeItemsCache.has(e.route_id))return this.routeItemsCache.get(e.route_id);let n=t.find(({code:d})=>d===e.from_port)||null,a=t.find(({code:d})=>d===e.to_port)||null,o=this.prepareRoutePoints(e),r=this.calculateTotalDistanceInKm(o),h=r*.539957,c={id:e.route_id,durationMs:e.leg_duration,fromPort:n,toPort:a,points:o,startDate:new Date(o[0].timestamp),finishDate:new Date(o[o.length-1].timestamp),totalDistanceKm:r,totalDistanceNmi:h};return this.routeItemsCache.set(e.route_id,c),c}prepareRoutePoints(e){return e.points.map(([t,n,a,o])=>({longitude:t,latitude:n,timestamp:a,speed:o}))}calculateTotalDistanceInKm(e){let n=0;for(let a=0;a<e.length-1;a++){let o=e[a],r=e[a+1],h=this.deg2rad(r.latitude-o.latitude),c=this.deg2rad(r.longitude-o.longitude),d=Math.sin(h/2)*Math.sin(h/2)+Math.cos(this.deg2rad(o.latitude))*Math.cos(this.deg2rad(r.latitude))*Math.sin(c/2)*Math.sin(c/2),Ze=6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)));n+=Ze}return n}deg2rad(e){return e*(Math.PI/180)}};i.\u0275fac=function(t){return new(t||i)(H(pe))},i.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var xt=(()=>{let i=class i{transform(e){let t=Math.floor(e/1e3),n=Math.floor(t/60),a=Math.floor(n/60),o=Math.floor(a/24);return t=t%60,n=t>=30?n+1:n,n=n%60,a=a%24,`
      ${this.padTo2Digits(o)} days
      ${this.padTo2Digits(a)} hrs
      ${this.padTo2Digits(n)} mins
    `.trim()}padTo2Digits(e){return e.toString().padStart(2,"0")}};i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=ie({name:"timeDuration",type:i,pure:!0,standalone:!0});let s=i;return s})();var ke='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="#ed4c5c"/><g fill="#ffe62e"><path d="m22 28.4 8 5.6-3-9.2 8-5.8h-9.9L22 10l-3 9H9l8 5.8-3 9.2zM35.3 35.3l-2.3.5 2.2.9V39l1.5-1.7 2.2.8-1.3-1.9 1.4-1.8-2.3.5-1.4-1.9zM38.7 28.5 37 30l2.3-.2 1 2.2.4-2.3 2.3-.2-2-1.2.5-2.3-1.7 1.5-2-1.2zM39.3 20.7 40 23l.7-2.2H43l-1.8-1.4.7-2.3-1.9 1.4-1.8-1.5.7 2.3-1.9 1.3zM35.3 12.7V15l1.4-1.9 2.3.5-1.4-1.8 1.3-1.9-2.2.9L35.2 9v2.3l-2.2.9z"/></g></svg>';var De='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><g fill="#ed4c5c"><path d="M61.2 25C58 11.8 46.2 2 32 2h-1v23h30.2M17 6C10 10.1 4.8 16.9 2.8 25H17V6M2.8 39c2 8.1 7.2 14.9 14.2 19V39H2.8zM31 62h1c14.2 0 26-9.8 29.2-23H31v23"/></g><path fill="#fff" d="M61.2 25H31V2c-5.1.2-9.9 1.6-14 4v19H2.8c-.5 2.2-.8 4.6-.8 7s.3 4.8.8 7H17v19c4.1 2.4 8.9 3.8 14 4V39h30.2c.5-2.2.8-4.6.8-7s-.3-4.8-.8-7"/></svg>';var Le='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><path fill="#ed4c5c" d="M32 2C18.9 2 7.8 10.4 3.7 22h56.6C56.2 10.4 45.1 2 32 2z"/><path fill="#3e4347" d="M32 62c13.1 0 24.2-8.3 28.3-20H3.7C7.8 53.7 18.9 62 32 62z"/><path fill="#f9f9f9" d="M3.7 22C2.6 25.1 2 28.5 2 32s.6 6.9 1.7 10h56.6c1.1-3.1 1.7-6.5 1.7-10s-.6-6.9-1.7-10H3.7z"/><g fill="#fff"><path d="M30.6 25.1c.3-.2.5 0 .7.2.1.2.1.8-.1 1.5-.1.4-.4.8-.6 1.1.4 0 .9-.1 1.4-.3.5.2.9.3 1.4.3-.2-.4-.4-1.2-.3-1.8 0-.9-.1-1.2-.3-1.4-.2-.2-.7-.3-1-.3-.2 0-.2.1-.2.1-.4-.1-.7-.1-.9 0-.2.2-.2.7-.1.6"/><path d="M37.3 28.1c-.2-1.1-1.3-.8-2.2-.3-.4.2-.8.4-1.2.4h-.3c-.5 0-1.1-.1-1.6-.3-.5.2-1.1.3-1.6.3h-.2c-.5 0-.9-.2-1.3-.5-.8-.4-1.9-.7-2.2.3.2-.1.4-.3.5-.3l-.4 9.6.2-.2.4-9.3c.1.1.5.5.6.5l-.3 8.1.3-.3.3-7.7c.1.1.4.3.5.4l-.3 6.7.8-.7.8-2.7c-.7-1.5-.6-2.8-.6-2.8h.2c.5 0 1.6-.3 2.1-.6.1 0 .1-.1.2-.1 0 .1.1.1.2.2.5.3 1.6.6 2.1.6h.2s.1 1.3-.6 2.8l.7 2.6.8.7-.3-6.6c.1-.1.3-.3.5-.4l.3 7.5.3.3-.3-8c.1-.1.5-.4.6-.5l.4 9.2.2.2-.4-9.5c.1.1.4.3.6.4"/><path d="M31.1 29.7v3.9s0 .1.1.1c.1.2.3.3.4.5l.3.3.3-.3.5-.5v-3.8c-.3-.1-.6-.2-.8-.4-.1-.1-.4 0-.8.2"/></g><path fill="#c09300" d="M36.3 37.9c0-.5-.5-.5-.9-.4-.1 0-.1 0-.2.1l-.6-2.2 3.3 3.2-.4-10.4c-.1-1.6-1.4-1.2-2.3-.6-.5.3-.9.5-1.4.5-.7-1.2-.3-2.8-.8-3.2-.2-.2-.9-.5-1.4-.5-.3 0-.2.2-.2.2-.5-.1-.9-.1-1.1.1-.2.1 0 1.1.1.9.3-.3.4-.2.6.1.2.3-.2 1.5-.7 2.4-.6 0-1.1-.2-1.6-.5-1-.6-2.3-.9-2.3.6L26 38.5l3.3-3.1-.6 2.1c-.1 0-.1 0-.2-.1-.4-.1-.9-.1-.9.4-.6-.1-.8.8-.2 1 0 .3 0 .5.4.5.9.3 2.5.4 4.1.4s3.2-.1 4.1-.4c.4-.1.4-.3.4-.5.8-.2.5-1.1-.1-.9m-5.1-4.3c0-.1 0-.1 0 0l-.1-.1v-3.8c.4-.1.7-.2.9-.4.2.2.5.3.8.4v3.8c-.2.2-.3.4-.5.5l-.3.3-.3-.3c-.2-.1-.3-.3-.5-.4m0-6.7c.2-.7.2-1.3.1-1.5-.2-.2-.4-.4-.7-.2-.1.1-.1-.4.1-.5.2-.1.5-.1.9 0 0 0 0-.2.2-.1.3 0 .9.2 1 .3.1.1.3.5.3 1.4 0 .6.1 1.4.3 1.8-.4 0-.9-.1-1.4-.3-.5.2-.9.3-1.4.3.2-.4.5-.8.6-1.2m-2.6 8.9.3-6.7c-.1-.1-.3-.3-.5-.4l-.4 7.6-.3.3.3-8.1c-.1-.1-.5-.4-.6-.5l-.4 9.3-.2.2.4-9.6c-.1 0-.4.1-.5.3.3-1 1.4-.7 2.2-.2.4.3.9.4 1.3.5h.2c.5 0 1-.1 1.6-.3.6.2 1.1.3 1.6.3h.3c.4-.1.8-.2 1.2-.4.9-.5 2-.8 2.2.3-.2-.1-.5-.3-.6-.3l.4 9.5-.2-.2-.4-9.4c-.1.1-.5.5-.6.5l.3 8-.3-.3-.3-7.5c-.1.1-.4.3-.5.4l.3 6.6-.8-.7-.7-2.6c.7-1.5.6-2.8.6-2.8h-.2c-.5 0-1.6-.2-2.1-.6-.1 0-.1-.1-.2-.2 0 0-.1.1-.2.1-.5.3-1.6.6-2.1.6h-.2s-.1 1.3.6 2.8l-.8 2.7-.7.8m3.4 2h-1.1l.7-3.4c.1.1.2.2.4.3.1-.1.3-.2.4-.3l.8 3.4H32"/></svg>';var Oe='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><path fill="#3e4347" d="M31.9 2C18.8 2 7.7 10.4 3.6 22h56.6C56.1 10.4 45 2 31.9 2z"/><path fill="#ffe62e" d="M31.9 62c13.1 0 24.2-8.3 28.3-20H3.6c4.1 11.7 15.2 20 28.3 20z"/><path fill="#ed4c5c" d="M3.6 22c-1.1 3.1-1.7 6.5-1.7 10s.6 6.9 1.7 10h56.6c1.1-3.1 1.7-6.5 1.7-10s-.6-6.9-1.7-10H3.6"/></svg>';var xe='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><path fill="#75a843" d="M1.7 32c0 13.1 8.4 24.2 20 28.3V3.7C10.1 7.8 1.7 18.9 1.7 32z"/><path fill="#ed4c5c" d="M61.7 32c0-13.1-8.4-24.2-20-28.3v56.6c11.7-4.1 20-15.2 20-28.3"/><path fill="#fff" d="M21.7 60.3c3.1 1.1 6.5 1.7 10 1.7s6.9-.6 10-1.7V3.7C38.6 2.6 35.2 2 31.7 2s-6.9.6-10 1.7v56.6"/></svg>';var Ee='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><path fill="#ed4c5c" d="M56 14H32v6h27.5c-.9-2.1-2.1-4.2-3.5-6"/><path fill="#f9f9f9" d="M61.4 38c.4-1.9.6-3.9.6-6H2c0 2.1.2 4.1.6 6h58.8"/><path fill="#ed4c5c" d="M32 2v6h18c-5-3.8-11.2-6-18-6"/><g fill="#f9f9f9"><path d="M32 14h24c-1.7-2.3-3.7-4.3-6-6H32v6M59.5 20H32v6h29.4c-.4-2.1-1.1-4.1-1.9-6"/></g><g fill="#ed4c5c"><path d="M32 26v6h30c0-2.1-.2-4.1-.6-6H32M4.5 44h55c.8-1.9 1.5-3.9 1.9-6H2.6c.4 2.1 1.1 4.1 1.9 6"/></g><path fill="#f9f9f9" d="M8 50h48c1.4-1.8 2.6-3.9 3.5-6h-55c.9 2.1 2.1 4.2 3.5 6"/><path fill="#ed4c5c" d="M8 50c1.7 2.3 3.7 4.3 6 6h36c2.3-1.7 4.3-3.7 6-6H8z"/><path fill="#f9f9f9" d="M14 56c5 3.8 11.2 6 18 6s13-2.2 18-6H14"/><path fill="#2a5f9e" d="M32 2C15.4 2 2 15.4 2 32h30V2z"/><g fill="#ffe62e"><path d="M19.9 25.6c-3 0-5.5-2.5-5.5-5.6 0-3.1 2.5-5.6 5.5-5.6 1.2 0 2.2.4 3.1 1-1.3-1.5-3.1-2.4-5.2-2.4-3.8 0-6.8 3.1-6.8 7s3.1 7 6.8 7c2.1 0 3.9-.9 5.2-2.4-.9.6-2 1-3.1 1M26 18.8l.7-1.8-.2 1.9 1.4-1.3-1 1.7 1.8-.6-1.6 1 1.9.3-1.9.3 1.6 1-1.8-.6 1 1.7-1.4-1.3.2 1.9-.7-1.8-.7 1.8.2-1.9-1.4 1.3 1-1.7-1.8.6 1.6-1L23 20l1.9-.3-1.6-1 1.8.6-1-1.7 1.4 1.3-.2-1.9z"/></g></svg>';var Pe='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="#f42f4c"/><path fill="#4f682e" d="m23.3 44 3.3-9.9-8.6-6.2h10.7L32 18l3.3 9.9H46L37.3 34l3.3 9.9-8.6-6-8.7 6.1m10.5-7.4 2.7 1.9-1-3.1-1.7 1.2m-5.3-1.2-1 3.1 2.7-1.9-1.7-1.2m.7-2.1 2.8 2 2.8-2-1.1-3.2h-3.5l-1 3.2m-4.5-3.2 2.7 1.9.6-1.9h-3.3M36.6 32l2.7-1.9H36l.6 1.9M31 27.9h2l-1-3.1-1 3.1"/></svg>';var Se='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><path fill="#ed4c5c" d="M32 2C18.9 2 7.8 10.3 3.7 22h56.6C56.2 10.3 45.1 2 32 2z"/><path fill="#428bc1" d="M32 62c13.1 0 24.2-8.3 28.3-20H3.7C7.8 53.7 18.9 62 32 62z"/><path fill="#fff" d="M3.7 22C2.6 25.1 2 28.5 2 32s.6 6.9 1.7 10h56.6c1.1-3.1 1.7-6.5 1.7-10s-.6-6.9-1.7-10H3.7z"/></svg>';var Fe='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><path fill="#f9f9f9" d="M32 62c16.6 0 30-13.4 30-30H2c0 16.6 13.4 30 30 30z"/><path fill="#ed4c5c" d="M32 2C15.4 2 2 15.4 2 32h60C62 15.4 48.6 2 32 2z"/><g fill="#f9f9f9"><path d="m21.2 17.5-1.2-1h1.5L22 15l.5 1.5H24l-1.2 1 .4 1.5-1.2-.9-1.2.9zM29.2 17.5l-1.2-1h1.5L30 15l.5 1.5H32l-1.2 1 .4 1.5-1.2-.9-1.2.9zM22.2 22.5l-1.2-1h1.5L23 20l.5 1.5H25l-1.2 1 .4 1.5-1.2-.9-1.2.9zM28.2 22.5l-1.2-1h1.5L29 20l.5 1.5H31l-1.2 1 .4 1.5-1.2-.9-1.2.9zM25.2 14.5l-1.2-1h1.5L26 12l.5 1.5H28l-1.2 1 .4 1.5-1.2-.9-1.2.9z"/><path d="M24.4 28c-4.8 0-8.6-4.1-8.6-9.1s3.9-9.1 8.6-9.1c.4 0 .7 0 1 .1-1.2-.6-2.5-.9-3.9-.9-5.2 0-9.5 4.5-9.5 10s4.3 10 9.5 10c1.6 0 3.2-.4 4.5-1.2-.5.1-1 .2-1.6.2"/></g></svg>';var Te='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" fill="#f5f5f5"/><path fill="#ed4c5c" d="M23.4 33.7c2.8 1.9 6.7 1.1 8.6-1.7 1.9-2.8 5.7-3.6 8.6-1.7 2.7 1.8 3.5 5.3 2 8 3.3-5.6 1.8-12.9-3.8-16.6-5.7-3.8-13.4-2.3-17.2 3.4-.1.2-.2.4-.3.5-1.4 2.9-.5 6.3 2.1 8.1"/><path fill="#003478" d="M42.3 38.9c.1-.2.2-.4.3-.5-.1.1-.2.3-.3.5"/><path fill="#428bc1" d="M40.6 30.3c-2.8-1.9-6.7-1.1-8.6 1.7-1.9 2.8-5.7 3.6-8.6 1.7-2.7-1.8-3.5-5.3-2-8-3.4 5.6-1.8 12.9 3.8 16.6 5.7 3.8 13.4 2.3 17.2-3.4.1-.2.2-.4.3-.5 1.4-2.9.5-6.3-2.1-8.1"/><g fill="#3e4347"><path d="M7.8 23.3 14.7 13l-.7-.5-.7-.4-6.9 10.3.7.4zM9.7 24.6l.7.4 6.8-10.3-.6-.4-.7-.5L9 24.1zM18.4 15.5l-6.8 10.3.7.5.7.4 6.8-10.3-.7-.4zM48.5 42.5l.7.5 3.2-4.8-.7-.5-.7-.4-3.2 4.8zM56.2 40.7 53 45.5l.7.5.7.4 3.2-4.8-.7-.4zM51.8 44.7l3.2-4.8-.7-.5-.7-.4-3.2 4.8.7.4zM48.1 43.2l-.7-.4-3.2 4.8.7.4.7.5 3.2-4.8zM50.6 44.9l-.6-.4-3.2 4.8.6.4.7.5 3.2-4.8zM52.5 46.2 49.3 51l.7.5.7.4 3.2-4.8-.7-.5zM7.1 41.2l-.7.4 6.9 10.3.7-.4.7-.5-6.9-10.3zM13.4 44.9l-.7.5 3.2 4.8.7-.5.6-.4-3.2-4.8zM12.3 37.7l-.7.5 6.8 10.3.7-.5.7-.4L13 37.3zM9 39.9l3.2 4.8.7-.5.7-.4-3.2-4.8-.7.4zM53.2 17.4l.7-.5-3.2-4.8-.7.4-.7.5 3.2 4.8zM48.1 20.8l.7-.5-3.2-4.8-.7.5-.7.4 3.2 4.8zM53 18.5l3.2 4.8.7-.5.7-.4-3.2-4.8-.7.4zM54.3 24.6l.7-.5-6.9-10.3-.7.5-.6.4L53.6 25zM51.7 26.3l.7-.5-3.2-4.8-.7.5-.7.4 3.2 4.8z"/></g></svg>';var Re='<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" aria-hidden="true" class="iconify iconify--emojione" viewBox="0 0 64 64"><g fill="#428bc1"><path d="M61.2 25C58 11.8 46.2 2 32 2h-1v23h30.2M17 6C10 10.1 4.8 16.9 2.8 25H17V6zM2.8 39c2 8.1 7.2 14.9 14.2 19V39H2.8zM31 62h1c14.2 0 26-9.8 29.2-23H31v23"/></g><path fill="#ffe62e" d="M61.2 25H31V2c-5.1.2-9.9 1.6-14 4v19H2.8c-.5 2.2-.8 4.6-.8 7 0 2.4.3 4.8.8 7H17v19c4.1 2.4 8.9 3.8 14 4V39h30.2c.5-2.2.8-4.6.8-7 0-2.4-.3-4.8-.8-7"/></svg>';function Ue(s,i){if(s&1&&z(0,"span",1),s&2){let l=oe();p("innerHTML",l.svgContent,se)}}var ii=(()=>{let i=class i{constructor(e){this.domSanitizer=e,this.svgContent=null,this.icons={china:ke,denmark:De,egypt:Le,germany:Oe,morocco:Pe,netherlands:Se,southkorea:Te,singapore:Fe,italy:xe,sweden:Re,malaysia:Ee}}ngOnChanges(){let e=this.country?this.icons[this.prepareCountryKey(this.country)]:null;e||console.warn(`Country flag for ${this.country} is not supported.`),this.svgContent=e?this.domSanitizer.bypassSecurityTrustHtml(e):null}prepareCountryKey(e){return e.split(" ").join("").toLowerCase()}};i.\u0275fac=function(t){return new(t||i)(g(ue))},i.\u0275cmp=m({type:i,selectors:[["app-country-flag"]],inputs:{country:"country"},standalone:!0,features:[M,f],decls:1,vars:1,consts:[["class","icon",3,"innerHTML",4,"ngIf"],[1,"icon",3,"innerHTML"]],template:function(t,n){t&1&&S(0,Ue,1,1,"span",0),t&2&&p("ngIf",n.svgContent)},dependencies:[R,ce],styles:[".icon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;font-size:0}.icon[_ngcontent-%COMP%]  svg{width:16px;height:16px}"],changeDetection:0});let s=i;return s})();export{vt as a,Ct as b,xt as c,ii as d,Dt as e};
