import{a as $,b as B,d as j,e as A}from"./chunk-WGVRYTDM.js";import{Aa as P,Ba as E,Da as F,Fa as h,Ja as d,Ka as C,La as x,T as l,Ta as R,U as f,Ua as z,W as w,Xa as y,a as M,aa as c,b as _,db as I,fb as T,gb as L,h as b,ha as O,ia as k,ib as q,ja as i,ka as n,la as m,qa as g,r as S,ra as D,y as u,za as p}from"./chunk-MRTDM7LS.js";var K=(s,t)=>t.id;function Q(s,t){if(s&1&&(i(0,"a",6)(1,"span",2),p(2),n(),i(3,"span",2)(4,"span",7),m(5,"app-country-flag",8),n(),i(6,"span",9),p(7),n()(),i(8,"span",2)(9,"span",7),m(10,"app-country-flag",8),n(),i(11,"span",9),p(12),n()(),i(13,"span",2),p(14),d(15,"date"),d(16,"date"),d(17,"date"),n()()),s&2){let e=t.$implicit,r=D();c("routerLink","/routes/"+e.id)("queryParams",r.filters),l(2),E("#",e.id,""),l(3),c("country",e==null||e.fromPort==null?null:e.fromPort.country),l(2),P(e==null||e.fromPort==null?null:e.fromPort.code),l(3),c("country",e==null||e.toPort==null?null:e.toPort.country),l(2),P(e==null||e.toPort==null?null:e.toPort.code),l(2),F(" ",x(15,10,e.finishDate,"yyyy"),", ",x(16,13,e.startDate,"MMM dd"),"\u2013",x(17,16,e.finishDate,"MMM dd")," ")}}function U(s,t){s&1&&(i(0,"div",10),p(1,"No routes found"),n())}var H=(()=>{let t=class t{constructor(){this.routes=[],this.filters={},this.setFilters=new w}onSearch(r){let o=r.target;this.setFilters.emit(_(M({},this.filters),{searchTerm:o.value}))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=u({type:t,selectors:[["app-routes-list"]],inputs:{routes:"routes",filters:"filters"},outputs:{setFilters:"setFilters"},standalone:!0,features:[h],decls:16,vars:2,consts:[[1,"root"],[1,"list-header"],[1,"list-info"],[1,"list-items"],[1,"list-footer"],["type","text","placeholder","start typing to filter routes",1,"search-input",3,"value","input"],[1,"list-item",3,"routerLink","queryParams"],[1,"list-info-icon"],[3,"country"],[1,"list-info-code"],[1,"list-empty"],["class","list-item",3,"routerLink","queryParams"],["class","list-empty"]],template:function(o,a){o&1&&(i(0,"div",0)(1,"div",1)(2,"span",2),p(3,"ID"),n(),i(4,"span",2),p(5,"Origin"),n(),i(6,"span",2),p(7,"Destination"),n(),i(8,"span",2),p(9,"Dates"),n()(),i(10,"div",3),O(11,Q,18,19,"a",11,K,!1,U,2,0,"div",12),n(),i(14,"div",4)(15,"input",5),g("input",function(v){return a.onSearch(v)}),n()()()),o&2&&(l(11),k(a.routes),l(4),c("value",(a.filters==null?null:a.filters.searchTerm)||""))},dependencies:[y,z,q,L,j],styles:[`.root[_ngcontent-%COMP%]{position:relative;height:100%;overflow:auto;overscroll-behavior-y:none}.list-header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:sticky;top:0;height:38px;border-radius:8px 8px 0 0;border-bottom:1px solid #eee}.list-item[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;cursor:pointer}.list-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #efefef}.list-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.list-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:calc(100% - 78px)}.list-info[_ngcontent-%COMP%]{box-sizing:border-box;padding:12px 8px;font-size:12px;line-height:1.25;color:#333;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}.list-header[_ngcontent-%COMP%]   .list-info[_ngcontent-%COMP%]{font-weight:700;color:#111;text-transform:uppercase;font-size:10px}.list-info[_ngcontent-%COMP%]:nth-child(1){width:48px;padding-left:16px}.list-info[_ngcontent-%COMP%]:nth-child(2), .list-info[_ngcontent-%COMP%]:nth-child(3){width:calc((100% - 218px)/2);min-width:90px}.list-info[_ngcontent-%COMP%]:nth-child(4){width:170px;padding-right:16px;text-align:right}.list-info-code[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;color:#222;font-weight:500;margin-right:4px}.list-info-icon[_ngcontent-%COMP%]{display:block;margin-right:6px}.list-info-icon[_ngcontent-%COMP%]   app-country-flag[_ngcontent-%COMP%]{display:block;font-size:0}.list-footer[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;position:sticky;bottom:0;height:38px;border-radius:0 0 8px 8px;border-top:1px solid #eee}.search-input[_ngcontent-%COMP%]{box-sizing:border-box;outline:none;display:block;width:100%;height:38px;border:0;padding:4px 16px 4px 36px;color:#111;background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"><g clip-path="url(%23a)"><path fill="rgba(0, 0, 0, 0.24)" fill-rule="evenodd" d="M9.913 12.033a6.5 6.5 0 1 1 2.12-2.12l.028.026 3 3a1.5 1.5 0 0 1-2.122 2.122l-3-3a1.817 1.817 0 0 1-.026-.028ZM11 6.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z" clip-rule="evenodd"/></g><defs><clipPath id="a"><path fill="%23fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>');background-repeat:no-repeat;background-position:16px 13px;background-size:12px;font-size:13px}.search-input[_ngcontent-%COMP%]::placeholder{color:#0000007a}.list-empty[_ngcontent-%COMP%]{box-sizing:border-box;padding:24px;min-height:100%;font-weight:700;color:#999;font-size:12px;display:flex;align-items:center;justify-content:center}`],changeDetection:0});let s=t;return s})();var ft=(()=>{let t=class t{constructor(r,o,a){this.dataService=r,this.router=o,this.activatedRoute=a,this.filters=new b({}),this.filters$=this.filters.asObservable()}ngOnInit(){this.routes$=this.filters.pipe(S(o=>this.dataService.getRoutes$(o)));let r=this.activatedRoute.snapshot.queryParams;this.filters.next(r)}onSetFilters(r){this.filters.next(r),this.router.navigate([],{queryParams:r,queryParamsHandling:"merge"})}};t.\u0275fac=function(o){return new(o||t)(f(A),f(T),f(I))},t.\u0275cmp=u({type:t,selectors:[["app-routes-page"]],standalone:!0,features:[h],decls:5,vars:6,consts:[[3,"routes","filters","setFilters"]],template:function(o,a){o&1&&(i(0,"app-routes-root"),m(1,"app-map"),i(2,"app-routes-list",0),g("setFilters",function(v){return a.onSetFilters(v)}),d(3,"async"),d(4,"async"),n()()),o&2&&(l(2),c("routes",C(3,2,a.routes$))("filters",C(4,4,a.filters$)))},dependencies:[y,R,B,$,H],encapsulation:2,changeDetection:0});let s=t;return s})();export{ft as RoutesPageComponent};
